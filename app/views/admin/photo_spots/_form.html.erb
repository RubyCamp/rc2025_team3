<%= form_with(model: [:admin, photo_spot || @photo_spot], html: { multipart: true, class: "space-y-6" }) do |form| %>
  <% if photo_spot.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3">
      <h2><%= pluralize(photo_spot.errors.count, "件のエラー") %>があります:</h2>
      <ul class="list-disc ml-6">
        <% photo_spot.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div>
    <%= form.label :name, '名称', class: 'block font-semibold mb-1' %>
    <%= form.text_field :name, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div class="flex flex-col sm:flex-row gap-4">
    <div class="flex-1">
      <%= form.label :address, '住所', class: 'block font-semibold mb-1' %>
      <%= form.text_field :address, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
    </div>
  </div>
  <div>
    <%= form.label :detail, '説明', class: 'block font-semibold mb-1' %>
    <%= form.text_area :detail, rows: 4, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div>
    <%= form.label :tag_ids, 'タグ', class: 'block font-semibold mb-1' %>
    <%= form.collection_check_boxes :tag_ids, Tag.all, :id, :name do |b| %>
      <div class="flex items-center">
        <%= b.check_box class: "h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" %>
        <%= b.label class: "ml-2 block text-sm text-gray-900" %>
      </div>
    <% end %>
  </div>
  <div>
    <%= form.label :parking_flag, '温泉の有無', class: 'block font-semibold mb-1' %>
    <%= form.text_field :parking_flag, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div>
    <%= form.label :images, '画像（最大5枚・JPEG/PNG/GIF）', class: 'block font-semibold mb-1' %>
    <%= form.file_field :images, multiple: true, accept: 'image/jpeg,image/png,image/gif', class: "block border rounded px-2 py-1 w-full" %>
    <% if photo_spot.images.attached? %>
      <div class="flex flex-wrap gap-2 mt-2">
        <% photo_spot.images.each_with_index do |img, idx| %>
          <div class="relative group">
            <%= image_tag img.variant(resize_to_limit: [100,100]), class: "rounded shadow border w-24 h-24 object-cover", alt: photo_spot.name %>
            <label class="block text-xs text-center mt-1">
              <%= check_box_tag "photo_spot[remove_image_ids][]", img.id, false %> 削除
            </label>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="flex flex-col sm:flex-row gap-2">
    <%= form.submit class: "rounded-md px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold w-full sm:w-auto" %>
  </div>
<% end %>
